"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var E,t,o,n=require("socket.io-client");require("@ethersproject/providers"),process,function(E){E.FEES_CHANGE="FEES_CHANGE",E.SOCKET_SESSION="SOCKET_SESSION",E.SOCKET_ERR="SOCKET_ERR",E.BUNDLE_REQUEST="BUNDLE_REQUEST",E.OPENMEV_BUNDLE_REQUEST="OPENMEV_BUNDLE_REQUEST",E.BUNDLE_STATUS_REQUEST="BUNDLE_STATUS_REQUEST",E.BUNDLE_RESPONSE="BUNDLE_RESPONSE",E.BUNDLE_CANCEL_REQUEST="BUNDLE_CANCEL_REQUEST"}(E||(E={})),function(E){E.PENDING_BUNDLE="PENDING_BUNDLE",E.FAILED_BUNDLE="FAILED_BUNDLE",E.SUCCESSFUL_BUNDLE="SUCCESSFUL_BUNDLE",E.REPLACE_BUNDLE_SUCCESSFUL="REPLACE_BUNDLE_SUCCESSFUL",E.BUNDLE_NOT_FOUND="BUNDLE_NOT_FOUND"}(t||(t={})),function(E){E.BLOCKTYPE_FLASHBOTS="BLOCKTYPE_FLASHBOTS",E.BLOCKTYPE_EDENNETWORK="BLOCKTYPE_EDENNETWORK",E.BUNDLE_OUTBID="BUNDLE_OUTBID",E.ERROR_BLOCKHEAD="ERROR_BLOCKHEAD",E.ERROR_BLOCKDATA="ERROR_BLOCKDATA",E.ERROR_UNKNOWN="ERROR_UNKNOWN"}(o||(o={})),exports.default=function(){function t(E){void 0===E&&(E="https://api.sushirelay.com/v1");var t=localStorage.getItem("SESSION_TOKEN"),o=n.io(E,{transports:["websocket"],auth:{token:t},reconnection:!0,reconnectionDelay:5e3,autoConnect:!0});this.socket=o}var o=t.prototype;return o.disconnect=function(){this.socket.off("connect"),this.socket.off("connect_error"),this.socket.off(E.SOCKET_ERR),this.socket.off(E.SOCKET_SESSION),this.socket.off(E.FEES_CHANGE),this.socket.off(E.BUNDLE_RESPONSE)},o.closeConnection=function(){this.socket.disconnect()},o.init=function(t){var o=this,n=t.onConnect,e=t.onConnectError,c=t.onDisconnect,S=t.onError,i=t.onFeesChange,s=t.onSocketSession,_=t.onTransactionResponse;return this.socket.on("connect",(function(){n&&n()})),this.socket.on("connect_error",(function(E){e&&e(E)})),this.socket.on("disconnect",(function(E){c&&c(E)})),this.socket.on(E.SOCKET_ERR,(function(E){S&&S(E)})),this.socket.on(E.SOCKET_SESSION,(function(E){localStorage.setItem("SESSION_TOKEN",E.token),s&&s(E)})),this.socket.on(E.FEES_CHANGE,(function(E){i&&i(E)})),this.socket.on(E.BUNDLE_RESPONSE,(function(E){_&&_(E)})),function(){o.disconnect()}},o.emitBundleRequest=function(t){this.socket.emit(E.BUNDLE_REQUEST,t)},o.emitTransactionRequest=function(t){this.socket.emit(E.OPENMEV_BUNDLE_REQUEST,t)},o.emitStatusRequest=function(t){this.socket.emit(E.BUNDLE_STATUS_REQUEST,{id:t})},o.emitTransactionCancellation=function(t){this.socket.emit(E.BUNDLE_CANCEL_REQUEST,{id:t})},t}();
//# sourceMappingURL=sdk-connect.cjs.production.min.js.map
